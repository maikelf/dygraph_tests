<html>
<head>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/dygraph/2.1.0/dygraph.min.js"></script>
    <script src="synchronizer.js"></script>
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/dygraph/2.1.0/dygraph.min.css" />
    <script src="synchronizer.js"></script>
</head>
<body>
<div id="graphdiv1" style="width:500px; height:300px;"></div>
<div id="graphdiv2" style="width:500px; height:300px;"></div>

<div style="margin-top: 30px;"">
    <input type=checkbox id='sync_check' checked onChange='update()'><label>Graph Synchronize</label>
</div>

<script type="text/javascript">
  const gs = [];  
  var blockRedraw = false;

  const temperatures = `Date,High,Low\n20070101,62,39\n20070102,62,44\n20070103,62,42\n20070104,57,45\n20070105,54,44\n20070106,55,36\n20070107,62,45\n20070108,66,48\n
  20070109,63,39\n20070110,57,37\n20070111,50,37\n20070112,48,35\n20070113,48,30\n20070114,48,28\n20070115,53,28\n20070116,50,30\n20070117,57,37\n20070118,61,33\n20070119,55,35\n
  20070120,61,35\n20070121,64,43\n20070122,61,36\n20070123,57,35\n20070124,60,35\n20070125,55,39\n20070126,54,44\n20070127,57,48\n20070128,59,45\n20070129,63,45\n
  20070130,59,41\n20070131,55,48\n20070201,53,46\n20070202,55,44\n20070203,59,37\n20070204,66,39\n20070205,64,43\n20070711,78,62\n20071207,55,45\n20071208,53,42\n
  20071209,57,39\n20071210,57,39\n20071211,57,41\n20071212,55,35\n20071213,59,34\n20071214,55,34\n20071215,55,39\n20071216,55,43\n20071217,57,48\n20071218,57,43\n
  20071219,59,41\n20071220,55,43\n20071221,53,39\n20071222,53,32\n20071223,55,37\n20071224,57,45\n20071225,57,37\n20071226,53,43\n20071227,48,37\n20071228,48,43\n
  20071229,57,44\n20071230,52,43\n20071231,57,42`;

  const temperatureBool = `Date,Bool\n20070101,0\n20070102,1\n20070103,1\n20070104,1\n20070105,1\n20070106,0\n20070107,1\n20070108,1\n
  20070109,0\n20070110,0\n20070111,0\n20070112,0\n20070113,0\n20070114,0\n20070115,0\n20070116,0\n20070117,0\n20070118,0\n20070119,0\n
  20070120,0\n20070121,1\n20070122,0\n20070123,0\n20070124,0\n20070125,0\n20070126,1\n20070127,1\n20070128,1\n20070129,1\n
  20070130,1\n20070131,1\n20070201,1\n20070202,1\n20070203,0\n20070204,0\n20070205,1\n20070711,1\n20071207,1\n20071208,1\n
  20071209,0\n20071210,0\n20071211,0\n20071212,0\n20071213,0\n20071214,0\n20071215,0\n20071216,1\n20071217,1\n20071218,1\n
  20071219,1\n20071220,1\n20071221,0\n20071222,0\n20071223,0\n20071224,1\n20071225,0\n20071226,1\n20071227,0\n20071228,1\n
  20071229,1\n20071230,1\n20071231,1`;
  
  var g1 = new Dygraph(
        document.getElementById("graphdiv1"),
        temperatures,
        {
            pointClickCallback: function(e, x, pts) {
                console.log(e,x,pts);
                alert(x);
            }
        }
    );

  var g2 = new Dygraph(
        document.getElementById("graphdiv2"),
        temperatureBool,
        {}
    );

  gs.push(g1);
  gs.push(g2);

  var sync = Dygraph.synchronize(gs);
  update();

  function update() {
        var sync_check = document.getElementById('sync_check').checked;
        sync.detach();
        sync = Dygraph.synchronize(gs, {
          zoom: (sync_check) ? true : false,
          selection: (sync_check) ? true : false,
          range: false
        });
    }
</script>
</body>
</html>